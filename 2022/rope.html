<html>
    <head>
        <title>Advent of Code 2022: Rope</title>
        <script type="text/javascript">
let small = ""
    + "R 4\n"
    + "U 4\n"
    + "L 3\n"
    + "D 1\n"
    + "R 4\n"
    + "D 1\n"
    + "L 5\n"
    + "R 2\n"
    ;

let medium = ""
    + "R 5\n"
    + "U 8\n"
    + "L 8\n"
    + "D 3\n"
    + "R 17\n"
    + "D 10\n"
    + "L 25\n"
    + "U 20\n"
    ;

let puzzle = ""
    + "D 2\n"
    + "U 2\n"
    + "L 2\n"
    + "R 1\n"
    + "L 1\n"
    + "U 1\n"
    + "L 2\n"
    + "D 1\n"
    + "L 2\n"
    + "D 1\n"
    + "L 2\n"
    + "D 2\n"
    + "L 1\n"
    + "R 2\n"
    + "U 1\n"
    + "R 1\n"
    + "U 2\n"
    + "R 1\n"
    + "U 2\n"
    + "D 1\n"
    + "L 2\n"
    + "U 1\n"
    + "D 1\n"
    + "L 1\n"
    + "D 1\n"
    + "U 1\n"
    + "R 2\n"
    + "D 2\n"
    + "L 1\n"
    + "R 1\n"
    + "L 2\n"
    + "D 1\n"
    + "R 2\n"
    + "D 1\n"
    + "U 2\n"
    + "D 2\n"
    + "R 2\n"
    + "L 2\n"
    + "U 2\n"
    + "R 2\n"
    + "L 1\n"
    + "D 1\n"
    + "R 1\n"
    + "U 1\n"
    + "R 2\n"
    + "L 1\n"
    + "D 1\n"
    + "R 1\n"
    + "L 2\n"
    + "D 2\n"
    + "U 1\n"
    + "L 1\n"
    + "R 1\n"
    + "U 1\n"
    + "L 2\n"
    + "D 2\n"
    + "L 2\n"
    + "U 1\n"
    + "L 2\n"
    + "R 1\n"
    + "L 1\n"
    + "R 1\n"
    + "D 1\n"
    + "R 2\n"
    + "D 1\n"
    + "R 1\n"
    + "D 1\n"
    + "U 1\n"
    + "L 1\n"
    + "R 1\n"
    + "L 1\n"
    + "R 1\n"
    + "D 2\n"
    + "L 1\n"
    + "D 2\n"
    + "R 1\n"
    + "D 1\n"
    + "U 2\n"
    + "R 2\n"
    + "U 2\n"
    + "L 1\n"
    + "U 1\n"
    + "R 1\n"
    + "L 2\n"
    + "D 2\n"
    + "R 1\n"
    + "U 1\n"
    + "L 1\n"
    + "U 2\n"
    + "L 1\n"
    + "D 2\n"
    + "R 1\n"
    + "U 1\n"
    + "R 1\n"
    + "U 2\n"
    + "R 1\n"
    + "U 2\n"
    + "L 1\n"
    + "R 1\n"
    + "U 2\n"
    + "R 2\n"
    + "U 1\n"
    + "L 2\n"
    + "R 1\n"
    + "L 2\n"
    + "U 2\n"
    + "L 2\n"
    + "U 2\n"
    + "R 2\n"
    + "D 1\n"
    + "U 2\n"
    + "L 2\n"
    + "D 3\n"
    + "U 1\n"
    + "L 1\n"
    + "R 1\n"
    + "D 3\n"
    + "U 1\n"
    + "L 3\n"
    + "R 1\n"
    + "U 1\n"
    + "R 3\n"
    + "D 2\n"
    + "U 1\n"
    + "R 2\n"
    + "L 2\n"
    + "U 1\n"
    + "D 1\n"
    + "U 1\n"
    + "D 1\n"
    + "L 2\n"
    + "U 2\n"
    + "R 3\n"
    + "D 2\n"
    + "L 2\n"
    + "D 2\n"
    + "U 3\n"
    + "D 3\n"
    + "U 2\n"
    + "L 1\n"
    + "U 2\n"
    + "R 3\n"
    + "D 2\n"
    + "R 2\n"
    + "D 1\n"
    + "U 3\n"
    + "L 3\n"
    + "D 1\n"
    + "U 3\n"
    + "R 3\n"
    + "D 1\n"
    + "L 1\n"
    + "D 3\n"
    + "U 3\n"
    + "D 1\n"
    + "U 2\n"
    + "R 1\n"
    + "D 2\n"
    + "U 3\n"
    + "D 1\n"
    + "R 2\n"
    + "D 3\n"
    + "L 3\n"
    + "R 1\n"
    + "D 3\n"
    + "L 2\n"
    + "D 3\n"
    + "U 3\n"
    + "R 1\n"
    + "U 3\n"
    + "L 2\n"
    + "U 2\n"
    + "L 2\n"
    + "D 3\n"
    + "L 3\n"
    + "U 2\n"
    + "R 2\n"
    + "L 3\n"
    + "R 2\n"
    + "U 3\n"
    + "R 3\n"
    + "L 1\n"
    + "U 3\n"
    + "D 3\n"
    + "L 2\n"
    + "D 2\n"
    + "U 2\n"
    + "D 3\n"
    + "L 3\n"
    + "D 2\n"
    + "L 1\n"
    + "U 3\n"
    + "D 2\n"
    + "R 3\n"
    + "L 3\n"
    + "R 1\n"
    + "U 1\n"
    + "D 1\n"
    + "R 2\n"
    + "L 3\n"
    + "U 2\n"
    + "D 1\n"
    + "R 3\n"
    + "L 1\n"
    + "R 1\n"
    + "L 2\n"
    + "R 1\n"
    + "U 3\n"
    + "R 2\n"
    + "U 1\n"
    + "L 1\n"
    + "R 3\n"
    + "D 3\n"
    + "U 2\n"
    + "R 2\n"
    + "D 1\n"
    + "R 3\n"
    + "D 2\n"
    + "L 3\n"
    + "R 1\n"
    + "U 3\n"
    + "R 2\n"
    + "U 4\n"
    + "L 2\n"
    + "D 1\n"
    + "U 1\n"
    + "R 4\n"
    + "U 2\n"
    + "R 2\n"
    + "U 3\n"
    + "R 1\n"
    + "L 3\n"
    + "U 3\n"
    + "R 3\n"
    + "U 4\n"
    + "R 4\n"
    + "D 1\n"
    + "U 2\n"
    + "R 1\n"
    + "L 1\n"
    + "R 2\n"
    + "U 4\n"
    + "L 1\n"
    + "U 2\n"
    + "L 1\n"
    + "R 3\n"
    + "L 2\n"
    + "D 4\n"
    + "R 4\n"
    + "D 3\n"
    + "R 4\n"
    + "U 1\n"
    + "D 4\n"
    + "R 2\n"
    + "D 1\n"
    + "R 4\n"
    + "U 3\n"
    + "R 4\n"
    + "L 1\n"
    + "U 4\n"
    + "D 2\n"
    + "L 1\n"
    + "D 3\n"
    + "L 1\n"
    + "R 2\n"
    + "L 2\n"
    + "D 4\n"
    + "U 3\n"
    + "D 1\n"
    + "L 3\n"
    + "D 3\n"
    + "U 3\n"
    + "L 4\n"
    + "R 3\n"
    + "U 1\n"
    + "R 2\n"
    + "D 1\n"
    + "U 4\n"
    + "D 4\n"
    + "R 4\n"
    + "U 2\n"
    + "R 4\n"
    + "L 4\n"
    + "D 2\n"
    + "L 4\n"
    + "D 2\n"
    + "U 3\n"
    + "D 2\n"
    + "U 4\n"
    + "R 1\n"
    + "U 1\n"
    + "L 1\n"
    + "U 1\n"
    + "L 1\n"
    + "D 3\n"
    + "U 4\n"
    + "L 3\n"
    + "U 1\n"
    + "L 4\n"
    + "R 4\n"
    + "L 3\n"
    + "R 2\n"
    + "U 2\n"
    + "L 3\n"
    + "D 2\n"
    + "U 1\n"
    + "D 1\n"
    + "U 4\n"
    + "R 2\n"
    + "L 2\n"
    + "D 1\n"
    + "L 4\n"
    + "D 3\n"
    + "U 3\n"
    + "L 2\n"
    + "U 4\n"
    + "R 4\n"
    + "L 2\n"
    + "R 3\n"
    + "L 1\n"
    + "D 4\n"
    + "U 1\n"
    + "L 2\n"
    + "D 4\n"
    + "L 2\n"
    + "D 3\n"
    + "U 4\n"
    + "R 4\n"
    + "U 2\n"
    + "R 2\n"
    + "U 4\n"
    + "D 3\n"
    + "U 3\n"
    + "L 4\n"
    + "D 2\n"
    + "R 1\n"
    + "U 4\n"
    + "R 1\n"
    + "U 1\n"
    + "D 3\n"
    + "U 1\n"
    + "L 5\n"
    + "U 5\n"
    + "R 2\n"
    + "D 3\n"
    + "U 5\n"
    + "D 5\n"
    + "U 1\n"
    + "D 2\n"
    + "L 2\n"
    + "U 5\n"
    + "L 1\n"
    + "R 5\n"
    + "L 1\n"
    + "D 5\n"
    + "L 4\n"
    + "D 4\n"
    + "R 4\n"
    + "L 1\n"
    + "R 1\n"
    + "U 1\n"
    + "R 4\n"
    + "U 2\n"
    + "R 5\n"
    + "L 4\n"
    + "R 3\n"
    + "U 4\n"
    + "R 2\n"
    + "U 4\n"
    + "L 4\n"
    + "U 3\n"
    + "L 3\n"
    + "U 1\n"
    + "L 4\n"
    + "R 1\n"
    + "U 3\n"
    + "R 3\n"
    + "L 5\n"
    + "U 5\n"
    + "L 4\n"
    + "D 1\n"
    + "L 2\n"
    + "U 1\n"
    + "D 2\n"
    + "L 1\n"
    + "U 5\n"
    + "D 4\n"
    + "U 1\n"
    + "R 2\n"
    + "D 2\n"
    + "U 5\n"
    + "R 5\n"
    + "U 1\n"
    + "L 3\n"
    + "U 5\n"
    + "L 4\n"
    + "R 3\n"
    + "U 4\n"
    + "L 2\n"
    + "R 4\n"
    + "D 2\n"
    + "L 2\n"
    + "R 4\n"
    + "U 2\n"
    + "D 4\n"
    + "R 3\n"
    + "D 4\n"
    + "U 1\n"
    + "L 3\n"
    + "R 4\n"
    + "L 3\n"
    + "U 1\n"
    + "R 2\n"
    + "U 3\n"
    + "L 3\n"
    + "D 2\n"
    + "U 4\n"
    + "R 1\n"
    + "L 3\n"
    + "D 4\n"
    + "L 1\n"
    + "R 1\n"
    + "D 5\n"
    + "R 1\n"
    + "U 2\n"
    + "D 1\n"
    + "U 4\n"
    + "L 2\n"
    + "U 2\n"
    + "R 4\n"
    + "U 3\n"
    + "R 3\n"
    + "D 2\n"
    + "R 5\n"
    + "D 2\n"
    + "U 5\n"
    + "D 5\n"
    + "U 2\n"
    + "D 1\n"
    + "R 5\n"
    + "U 3\n"
    + "L 3\n"
    + "U 1\n"
    + "R 5\n"
    + "L 4\n"
    + "D 6\n"
    + "L 1\n"
    + "U 2\n"
    + "D 4\n"
    + "U 6\n"
    + "D 6\n"
    + "R 1\n"
    + "U 3\n"
    + "L 5\n"
    + "R 5\n"
    + "U 2\n"
    + "R 2\n"
    + "L 5\n"
    + "D 4\n"
    + "L 3\n"
    + "R 1\n"
    + "U 4\n"
    + "D 3\n"
    + "L 2\n"
    + "D 5\n"
    + "L 3\n"
    + "R 3\n"
    + "D 2\n"
    + "L 1\n"
    + "U 5\n"
    + "L 5\n"
    + "D 6\n"
    + "U 3\n"
    + "R 5\n"
    + "L 5\n"
    + "U 2\n"
    + "L 3\n"
    + "U 5\n"
    + "D 6\n"
    + "R 4\n"
    + "L 5\n"
    + "U 6\n"
    + "L 2\n"
    + "R 1\n"
    + "L 1\n"
    + "U 5\n"
    + "D 3\n"
    + "U 2\n"
    + "R 1\n"
    + "U 2\n"
    + "R 2\n"
    + "D 5\n"
    + "R 1\n"
    + "D 5\n"
    + "R 5\n"
    + "U 2\n"
    + "L 3\n"
    + "R 1\n"
    + "U 5\n"
    + "D 5\n"
    + "R 2\n"
    + "L 5\n"
    + "D 6\n"
    + "L 1\n"
    + "U 1\n"
    + "D 6\n"
    + "U 4\n"
    + "D 5\n"
    + "L 5\n"
    + "D 3\n"
    + "L 4\n"
    + "D 1\n"
    + "L 4\n"
    + "D 6\n"
    + "R 5\n"
    + "D 6\n"
    + "U 6\n"
    + "D 2\n"
    + "L 3\n"
    + "D 3\n"
    + "R 5\n"
    + "U 6\n"
    + "D 2\n"
    + "U 4\n"
    + "L 1\n"
    + "U 6\n"
    + "L 2\n"
    + "U 4\n"
    + "D 6\n"
    + "R 1\n"
    + "D 1\n"
    + "U 2\n"
    + "L 3\n"
    + "D 3\n"
    + "R 2\n"
    + "L 6\n"
    + "U 3\n"
    + "D 5\n"
    + "U 3\n"
    + "L 4\n"
    + "U 5\n"
    + "L 5\n"
    + "U 6\n"
    + "L 3\n"
    + "R 1\n"
    + "U 3\n"
    + "R 1\n"
    + "U 4\n"
    + "L 4\n"
    + "D 5\n"
    + "L 6\n"
    + "R 1\n"
    + "L 3\n"
    + "D 4\n"
    + "L 3\n"
    + "R 1\n"
    + "L 4\n"
    + "R 3\n"
    + "D 3\n"
    + "L 1\n"
    + "U 4\n"
    + "D 2\n"
    + "U 5\n"
    + "L 3\n"
    + "D 6\n"
    + "U 2\n"
    + "R 3\n"
    + "D 5\n"
    + "L 1\n"
    + "D 1\n"
    + "L 3\n"
    + "U 2\n"
    + "R 3\n"
    + "L 3\n"
    + "U 7\n"
    + "R 2\n"
    + "D 1\n"
    + "L 3\n"
    + "R 4\n"
    + "D 2\n"
    + "R 5\n"
    + "L 1\n"
    + "D 5\n"
    + "L 2\n"
    + "R 2\n"
    + "U 7\n"
    + "L 7\n"
    + "D 2\n"
    + "L 7\n"
    + "D 5\n"
    + "U 2\n"
    + "L 2\n"
    + "U 2\n"
    + "D 4\n"
    + "U 1\n"
    + "D 4\n"
    + "L 1\n"
    + "D 2\n"
    + "R 5\n"
    + "D 3\n"
    + "L 2\n"
    + "U 4\n"
    + "R 7\n"
    + "D 4\n"
    + "R 3\n"
    + "U 2\n"
    + "R 4\n"
    + "L 1\n"
    + "U 4\n"
    + "L 4\n"
    + "U 7\n"
    + "R 1\n"
    + "L 6\n"
    + "D 5\n"
    + "R 5\n"
    + "L 1\n"
    + "R 4\n"
    + "L 1\n"
    + "U 3\n"
    + "L 7\n"
    + "R 7\n"
    + "D 4\n"
    + "L 3\n"
    + "R 3\n"
    + "D 1\n"
    + "U 7\n"
    + "R 3\n"
    + "D 2\n"
    + "U 4\n"
    + "D 2\n"
    + "R 3\n"
    + "D 1\n"
    + "R 3\n"
    + "D 3\n"
    + "U 1\n"
    + "R 6\n"
    + "L 2\n"
    + "D 2\n"
    + "U 4\n"
    + "D 5\n"
    + "L 7\n"
    + "R 1\n"
    + "L 7\n"
    + "U 6\n"
    + "D 2\n"
    + "R 3\n"
    + "D 5\n"
    + "U 1\n"
    + "L 7\n"
    + "D 6\n"
    + "U 3\n"
    + "D 6\n"
    + "L 1\n"
    + "R 2\n"
    + "L 6\n"
    + "D 7\n"
    + "R 5\n"
    + "U 1\n"
    + "L 7\n"
    + "U 2\n"
    + "D 2\n"
    + "L 5\n"
    + "R 7\n"
    + "D 4\n"
    + "U 3\n"
    + "R 7\n"
    + "L 4\n"
    + "U 8\n"
    + "D 8\n"
    + "R 2\n"
    + "U 2\n"
    + "R 7\n"
    + "U 1\n"
    + "D 7\n"
    + "R 1\n"
    + "L 7\n"
    + "R 7\n"
    + "L 8\n"
    + "D 3\n"
    + "R 5\n"
    + "L 4\n"
    + "D 3\n"
    + "L 6\n"
    + "R 6\n"
    + "D 6\n"
    + "L 3\n"
    + "D 5\n"
    + "R 1\n"
    + "U 5\n"
    + "D 7\n"
    + "R 8\n"
    + "U 3\n"
    + "D 5\n"
    + "U 8\n"
    + "L 8\n"
    + "R 6\n"
    + "D 8\n"
    + "U 5\n"
    + "R 1\n"
    + "D 1\n"
    + "R 5\n"
    + "U 2\n"
    + "R 8\n"
    + "D 7\n"
    + "L 3\n"
    + "D 3\n"
    + "U 7\n"
    + "D 3\n"
    + "U 7\n"
    + "R 7\n"
    + "L 4\n"
    + "D 7\n"
    + "U 2\n"
    + "L 3\n"
    + "U 7\n"
    + "L 1\n"
    + "D 3\n"
    + "L 1\n"
    + "R 4\n"
    + "D 8\n"
    + "L 5\n"
    + "U 5\n"
    + "D 3\n"
    + "L 5\n"
    + "D 6\n"
    + "L 1\n"
    + "R 5\n"
    + "U 4\n"
    + "R 4\n"
    + "D 1\n"
    + "R 6\n"
    + "L 1\n"
    + "D 7\n"
    + "R 4\n"
    + "L 2\n"
    + "R 3\n"
    + "U 4\n"
    + "L 8\n"
    + "D 1\n"
    + "R 6\n"
    + "L 6\n"
    + "R 8\n"
    + "D 8\n"
    + "U 4\n"
    + "R 1\n"
    + "D 2\n"
    + "R 5\n"
    + "D 1\n"
    + "U 8\n"
    + "L 5\n"
    + "D 5\n"
    + "U 5\n"
    + "R 8\n"
    + "L 6\n"
    + "R 4\n"
    + "U 1\n"
    + "R 5\n"
    + "U 8\n"
    + "D 1\n"
    + "U 1\n"
    + "D 5\n"
    + "L 7\n"
    + "R 6\n"
    + "L 3\n"
    + "R 1\n"
    + "U 2\n"
    + "L 6\n"
    + "R 5\n"
    + "D 4\n"
    + "R 6\n"
    + "D 4\n"
    + "R 2\n"
    + "L 7\n"
    + "R 8\n"
    + "L 6\n"
    + "D 2\n"
    + "L 8\n"
    + "U 4\n"
    + "R 4\n"
    + "U 3\n"
    + "D 8\n"
    + "U 8\n"
    + "L 8\n"
    + "D 5\n"
    + "R 2\n"
    + "D 5\n"
    + "U 7\n"
    + "L 9\n"
    + "R 8\n"
    + "U 9\n"
    + "R 9\n"
    + "U 6\n"
    + "L 6\n"
    + "D 1\n"
    + "U 3\n"
    + "L 1\n"
    + "D 7\n"
    + "R 6\n"
    + "L 6\n"
    + "D 7\n"
    + "U 1\n"
    + "R 9\n"
    + "D 7\n"
    + "U 8\n"
    + "R 6\n"
    + "U 1\n"
    + "D 5\n"
    + "U 5\n"
    + "D 1\n"
    + "L 1\n"
    + "D 9\n"
    + "U 1\n"
    + "R 6\n"
    + "U 9\n"
    + "R 6\n"
    + "U 6\n"
    + "D 7\n"
    + "R 1\n"
    + "L 1\n"
    + "D 8\n"
    + "L 3\n"
    + "D 7\n"
    + "U 8\n"
    + "L 7\n"
    + "D 2\n"
    + "U 6\n"
    + "D 4\n"
    + "L 8\n"
    + "U 3\n"
    + "D 1\n"
    + "U 6\n"
    + "D 3\n"
    + "R 8\n"
    + "L 9\n"
    + "R 3\n"
    + "L 6\n"
    + "U 9\n"
    + "D 9\n"
    + "L 3\n"
    + "U 1\n"
    + "D 2\n"
    + "R 4\n"
    + "L 5\n"
    + "R 2\n"
    + "U 3\n"
    + "D 5\n"
    + "R 5\n"
    + "L 4\n"
    + "U 3\n"
    + "L 7\n"
    + "U 5\n"
    + "D 9\n"
    + "U 6\n"
    + "R 5\n"
    + "D 3\n"
    + "U 8\n"
    + "L 6\n"
    + "D 5\n"
    + "R 9\n"
    + "U 8\n"
    + "L 5\n"
    + "D 1\n"
    + "R 8\n"
    + "L 4\n"
    + "R 2\n"
    + "L 3\n"
    + "R 9\n"
    + "D 9\n"
    + "R 7\n"
    + "D 5\n"
    + "R 6\n"
    + "U 2\n"
    + "D 4\n"
    + "L 8\n"
    + "D 2\n"
    + "L 1\n"
    + "D 2\n"
    + "U 3\n"
    + "L 2\n"
    + "R 3\n"
    + "D 9\n"
    + "U 3\n"
    + "R 4\n"
    + "D 1\n"
    + "L 8\n"
    + "R 3\n"
    + "U 4\n"
    + "L 4\n"
    + "R 3\n"
    + "L 5\n"
    + "D 4\n"
    + "R 2\n"
    + "D 4\n"
    + "R 4\n"
    + "U 4\n"
    + "R 7\n"
    + "L 6\n"
    + "R 9\n"
    + "D 1\n"
    + "R 8\n"
    + "L 5\n"
    + "U 4\n"
    + "D 10\n"
    + "L 6\n"
    + "D 3\n"
    + "R 2\n"
    + "U 1\n"
    + "D 5\n"
    + "R 2\n"
    + "U 6\n"
    + "L 9\n"
    + "U 7\n"
    + "L 10\n"
    + "U 4\n"
    + "L 8\n"
    + "D 3\n"
    + "U 7\n"
    + "D 7\n"
    + "U 9\n"
    + "L 2\n"
    + "R 6\n"
    + "U 4\n"
    + "R 9\n"
    + "L 5\n"
    + "U 3\n"
    + "L 4\n"
    + "R 1\n"
    + "D 8\n"
    + "U 10\n"
    + "D 10\n"
    + "R 3\n"
    + "U 3\n"
    + "D 2\n"
    + "L 5\n"
    + "U 3\n"
    + "D 4\n"
    + "U 1\n"
    + "R 9\n"
    + "L 3\n"
    + "D 8\n"
    + "L 5\n"
    + "U 8\n"
    + "R 3\n"
    + "U 10\n"
    + "L 10\n"
    + "R 4\n"
    + "D 5\n"
    + "U 9\n"
    + "R 8\n"
    + "L 5\n"
    + "U 9\n"
    + "L 6\n"
    + "U 10\n"
    + "D 8\n"
    + "U 2\n"
    + "L 8\n"
    + "D 7\n"
    + "U 2\n"
    + "D 5\n"
    + "U 8\n"
    + "L 2\n"
    + "D 3\n"
    + "U 8\n"
    + "R 8\n"
    + "D 10\n"
    + "R 3\n"
    + "L 3\n"
    + "U 4\n"
    + "R 3\n"
    + "U 4\n"
    + "L 6\n"
    + "U 4\n"
    + "R 3\n"
    + "D 9\n"
    + "L 9\n"
    + "U 5\n"
    + "D 1\n"
    + "R 3\n"
    + "D 2\n"
    + "L 9\n"
    + "U 9\n"
    + "R 9\n"
    + "U 6\n"
    + "R 7\n"
    + "L 8\n"
    + "U 2\n"
    + "L 4\n"
    + "D 10\n"
    + "L 4\n"
    + "D 9\n"
    + "L 9\n"
    + "R 10\n"
    + "L 3\n"
    + "R 7\n"
    + "U 2\n"
    + "L 3\n"
    + "R 1\n"
    + "D 4\n"
    + "L 2\n"
    + "R 10\n"
    + "D 5\n"
    + "L 2\n"
    + "D 2\n"
    + "L 4\n"
    + "U 6\n"
    + "D 9\n"
    + "R 6\n"
    + "U 9\n"
    + "D 4\n"
    + "L 6\n"
    + "U 8\n"
    + "D 1\n"
    + "R 1\n"
    + "L 10\n"
    + "U 4\n"
    + "R 6\n"
    + "U 11\n"
    + "R 8\n"
    + "U 1\n"
    + "D 5\n"
    + "R 7\n"
    + "D 8\n"
    + "L 5\n"
    + "R 6\n"
    + "U 5\n"
    + "R 1\n"
    + "U 7\n"
    + "L 4\n"
    + "D 6\n"
    + "U 8\n"
    + "R 10\n"
    + "D 1\n"
    + "L 8\n"
    + "R 3\n"
    + "U 7\n"
    + "R 2\n"
    + "U 9\n"
    + "D 9\n"
    + "R 9\n"
    + "L 3\n"
    + "R 4\n"
    + "U 10\n"
    + "L 7\n"
    + "R 1\n"
    + "L 5\n"
    + "D 11\n"
    + "R 4\n"
    + "U 10\n"
    + "R 10\n"
    + "L 3\n"
    + "D 2\n"
    + "L 4\n"
    + "U 9\n"
    + "L 1\n"
    + "D 10\n"
    + "L 7\n"
    + "R 11\n"
    + "D 5\n"
    + "U 3\n"
    + "D 10\n"
    + "U 5\n"
    + "L 2\n"
    + "R 9\n"
    + "D 10\n"
    + "U 1\n"
    + "R 10\n"
    + "U 1\n"
    + "L 11\n"
    + "R 10\n"
    + "L 8\n"
    + "D 10\n"
    + "L 5\n"
    + "R 2\n"
    + "L 3\n"
    + "U 4\n"
    + "L 10\n"
    + "R 3\n"
    + "D 5\n"
    + "R 8\n"
    + "L 2\n"
    + "U 1\n"
    + "D 7\n"
    + "U 7\n"
    + "L 1\n"
    + "U 11\n"
    + "D 2\n"
    + "L 2\n"
    + "D 11\n"
    + "L 6\n"
    + "R 9\n"
    + "U 10\n"
    + "R 7\n"
    + "L 11\n"
    + "R 7\n"
    + "D 1\n"
    + "R 3\n"
    + "U 6\n"
    + "R 7\n"
    + "D 8\n"
    + "U 3\n"
    + "L 1\n"
    + "D 11\n"
    + "U 7\n"
    + "R 1\n"
    + "L 7\n"
    + "R 2\n"
    + "L 7\n"
    + "D 3\n"
    + "U 10\n"
    + "D 9\n"
    + "U 10\n"
    + "R 5\n"
    + "D 4\n"
    + "U 7\n"
    + "L 11\n"
    + "U 1\n"
    + "L 12\n"
    + "R 10\n"
    + "U 7\n"
    + "R 3\n"
    + "L 2\n"
    + "U 11\n"
    + "R 6\n"
    + "U 8\n"
    + "D 2\n"
    + "R 2\n"
    + "L 8\n"
    + "U 7\n"
    + "D 10\n"
    + "U 3\n"
    + "D 1\n"
    + "U 8\n"
    + "R 2\n"
    + "D 9\n"
    + "L 8\n"
    + "R 10\n"
    + "L 1\n"
    + "U 8\n"
    + "R 11\n"
    + "U 8\n"
    + "R 12\n"
    + "D 10\n"
    + "L 5\n"
    + "U 6\n"
    + "L 11\n"
    + "D 12\n"
    + "L 5\n"
    + "U 4\n"
    + "L 8\n"
    + "U 11\n"
    + "D 2\n"
    + "U 4\n"
    + "L 6\n"
    + "R 1\n"
    + "L 4\n"
    + "U 2\n"
    + "L 5\n"
    + "R 2\n"
    + "D 7\n"
    + "L 12\n"
    + "R 4\n"
    + "L 1\n"
    + "D 7\n"
    + "L 11\n"
    + "U 3\n"
    + "D 9\n"
    + "R 12\n"
    + "U 10\n"
    + "D 9\n"
    + "U 10\n"
    + "L 6\n"
    + "R 6\n"
    + "D 10\n"
    + "R 10\n"
    + "D 5\n"
    + "U 9\n"
    + "R 2\n"
    + "D 4\n"
    + "L 9\n"
    + "U 2\n"
    + "R 5\n"
    + "L 8\n"
    + "R 1\n"
    + "D 9\n"
    + "L 7\n"
    + "D 11\n"
    + "R 3\n"
    + "L 8\n"
    + "U 3\n"
    + "D 7\n"
    + "U 3\n"
    + "R 8\n"
    + "U 7\n"
    + "L 1\n"
    + "U 10\n"
    + "D 8\n"
    + "R 11\n"
    + "U 10\n"
    + "D 11\n"
    + "U 8\n"
    + "R 12\n"
    + "U 9\n"
    + "D 12\n"
    + "U 4\n"
    + "D 11\n"
    + "R 8\n"
    + "D 1\n"
    + "L 4\n"
    + "R 9\n"
    + "L 7\n"
    + "U 8\n"
    + "R 6\n"
    + "D 5\n"
    + "R 8\n"
    + "D 2\n"
    + "R 6\n"
    + "L 4\n"
    + "D 7\n"
    + "L 3\n"
    + "U 11\n"
    + "R 2\n"
    + "L 10\n"
    + "D 13\n"
    + "R 2\n"
    + "D 10\n"
    + "U 9\n"
    + "D 5\n"
    + "U 5\n"
    + "D 5\n"
    + "L 11\n"
    + "U 3\n"
    + "R 5\n"
    + "U 7\n"
    + "L 6\n"
    + "D 4\n"
    + "L 3\n"
    + "R 2\n"
    + "D 9\n"
    + "U 7\n"
    + "D 9\n"
    + "U 1\n"
    + "D 8\n"
    + "L 11\n"
    + "D 7\n"
    + "U 7\n"
    + "R 3\n"
    + "L 6\n"
    + "D 6\n"
    + "R 5\n"
    + "L 6\n"
    + "R 3\n"
    + "U 10\n"
    + "L 13\n"
    + "U 9\n"
    + "R 11\n"
    + "L 13\n"
    + "R 9\n"
    + "D 3\n"
    + "U 3\n"
    + "L 12\n"
    + "U 4\n"
    + "L 3\n"
    + "D 12\n"
    + "R 13\n"
    + "D 7\n"
    + "U 6\n"
    + "L 11\n"
    + "U 4\n"
    + "L 2\n"
    + "D 7\n"
    + "L 8\n"
    + "R 10\n"
    + "U 13\n"
    + "R 9\n"
    + "U 8\n"
    + "R 11\n"
    + "U 8\n"
    + "R 7\n"
    + "U 11\n"
    + "L 8\n"
    + "D 3\n"
    + "L 4\n"
    + "U 6\n"
    + "D 12\n"
    + "R 13\n"
    + "U 10\n"
    + "L 4\n"
    + "R 12\n"
    + "U 13\n"
    + "L 11\n"
    + "R 10\n"
    + "L 8\n"
    + "U 6\n"
    + "L 1\n"
    + "D 11\n"
    + "U 12\n"
    + "L 8\n"
    + "U 2\n"
    + "L 6\n"
    + "U 2\n"
    + "L 1\n"
    + "U 3\n"
    + "D 5\n"
    + "U 2\n"
    + "D 10\n"
    + "U 11\n"
    + "L 9\n"
    + "D 9\n"
    + "R 7\n"
    + "L 3\n"
    + "U 3\n"
    + "D 2\n"
    + "U 2\n"
    + "R 10\n"
    + "D 1\n"
    + "R 5\n"
    + "L 1\n"
    + "D 3\n"
    + "R 8\n"
    + "U 4\n"
    + "R 1\n"
    + "D 13\n"
    + "L 12\n"
    + "U 1\n"
    + "D 13\n"
    + "R 4\n"
    + "D 3\n"
    + "R 8\n"
    + "D 2\n"
    + "U 3\n"
    + "D 8\n"
    + "L 3\n"
    + "U 9\n"
    + "R 4\n"
    + "D 8\n"
    + "U 9\n"
    + "D 3\n"
    + "L 8\n"
    + "D 11\n"
    + "L 8\n"
    + "U 1\n"
    + "D 13\n"
    + "U 14\n"
    + "D 10\n"
    + "U 9\n"
    + "R 4\n"
    + "D 14\n"
    + "L 10\n"
    + "D 10\n"
    + "U 6\n"
    + "D 7\n"
    + "R 8\n"
    + "U 5\n"
    + "L 8\n"
    + "R 9\n"
    + "D 12\n"
    + "L 9\n"
    + "D 8\n"
    + "R 13\n"
    + "L 7\n"
    + "U 11\n"
    + "R 8\n"
    + "D 5\n"
    + "U 14\n"
    + "D 5\n"
    + "U 9\n"
    + "L 7\n"
    + "D 12\n"
    + "R 2\n"
    + "L 14\n"
    + "U 1\n"
    + "R 9\n"
    + "U 10\n"
    + "R 4\n"
    + "U 4\n"
    + "R 14\n"
    + "D 10\n"
    + "L 3\n"
    + "R 4\n"
    + "L 13\n"
    + "U 3\n"
    + "R 6\n"
    + "L 2\n"
    + "U 6\n"
    + "R 2\n"
    + "D 10\n"
    + "U 4\n"
    + "L 10\n"
    + "U 8\n"
    + "L 6\n"
    + "D 2\n"
    + "R 1\n"
    + "D 5\n"
    + "U 14\n"
    + "L 4\n"
    + "D 5\n"
    + "L 5\n"
    + "U 10\n"
    + "D 5\n"
    + "R 13\n"
    + "D 14\n"
    + "U 14\n"
    + "R 4\n"
    + "D 13\n"
    + "U 10\n"
    + "R 13\n"
    + "D 12\n"
    + "R 10\n"
    + "L 12\n"
    + "U 8\n"
    + "D 10\n"
    + "U 12\n"
    + "D 5\n"
    + "L 11\n"
    + "D 13\n"
    + "R 8\n"
    + "D 10\n"
    + "R 13\n"
    + "L 13\n"
    + "D 1\n"
    + "U 10\n"
    + "L 4\n"
    + "U 14\n"
    + "D 12\n"
    + "U 4\n"
    + "D 5\n"
    + "R 10\n"
    + "L 8\n"
    + "R 13\n"
    + "D 13\n"
    + "U 5\n"
    + "D 4\n"
    + "L 1\n"
    + "D 9\n"
    + "L 14\n"
    + "U 14\n"
    + "R 3\n"
    + "U 6\n"
    + "R 14\n"
    + "L 4\n"
    + "R 7\n"
    + "D 3\n"
    + "R 8\n"
    + "D 5\n"
    + "L 2\n"
    + "U 5\n"
    + "D 8\n"
    + "U 3\n"
    + "R 7\n"
    + "D 13\n"
    + "U 14\n"
    + "R 11\n"
    + "U 6\n"
    + "L 15\n"
    + "R 4\n"
    + "U 12\n"
    + "R 1\n"
    + "L 8\n"
    + "U 15\n"
    + "R 5\n"
    + "L 2\n"
    + "D 1\n"
    + "R 12\n"
    + "D 1\n"
    + "R 12\n"
    + "D 1\n"
    + "L 1\n"
    + "R 9\n"
    + "U 11\n"
    + "D 2\n"
    + "U 12\n"
    + "D 3\n"
    + "U 6\n"
    + "D 12\n"
    + "U 11\n"
    + "R 6\n"
    + "D 11\n"
    + "L 5\n"
    + "R 3\n"
    + "D 1\n"
    + "U 7\n"
    + "L 10\n"
    + "D 4\n"
    + "L 7\n"
    + "R 2\n"
    + "U 8\n"
    + "D 11\n"
    + "L 12\n"
    + "R 6\n"
    + "L 7\n"
    + "D 13\n"
    + "U 11\n"
    + "R 5\n"
    + "D 1\n"
    + "L 11\n"
    + "D 2\n"
    + "U 15\n"
    + "L 11\n"
    + "R 3\n"
    + "L 9\n"
    + "D 12\n"
    + "U 8\n"
    + "D 9\n"
    + "L 14\n"
    + "D 10\n"
    + "L 12\n"
    + "R 13\n"
    + "D 3\n"
    + "L 9\n"
    + "D 13\n"
    + "R 8\n"
    + "D 15\n"
    + "U 14\n"
    + "R 9\n"
    + "U 12\n"
    + "R 2\n"
    + "D 3\n"
    + "U 5\n"
    + "L 3\n"
    + "R 7\n"
    + "U 15\n"
    + "R 10\n"
    + "L 6\n"
    + "R 6\n"
    + "D 12\n"
    + "R 14\n"
    + "L 7\n"
    + "U 8\n"
    + "L 11\n"
    + "R 13\n"
    + "U 8\n"
    + "L 8\n"
    + "R 5\n"
    + "D 3\n"
    + "U 8\n"
    + "D 4\n"
    + "L 1\n"
    + "D 11\n"
    + "U 15\n"
    + "L 14\n"
    + "R 8\n"
    + "L 1\n"
    + "R 13\n"
    + "L 2\n"
    + "R 13\n"
    + "U 9\n"
    + "D 12\n"
    + "L 14\n"
    + "R 13\n"
    + "L 5\n"
    + "R 7\n"
    + "D 13\n"
    + "U 15\n"
    + "R 2\n"
    + "L 12\n"
    + "D 12\n"
    + "R 13\n"
    + "U 2\n"
    + "D 4\n"
    + "R 14\n"
    + "L 1\n"
    + "U 12\n"
    + "D 3\n"
    + "U 6\n"
    + "R 6\n"
    + "L 6\n"
    + "U 9\n"
    + "L 16\n"
    + "U 16\n"
    + "D 8\n"
    + "R 8\n"
    + "U 1\n"
    + "D 14\n"
    + "R 13\n"
    + "D 3\n"
    + "U 14\n"
    + "R 7\n"
    + "U 7\n"
    + "R 7\n"
    + "D 12\n"
    + "U 1\n"
    + "D 2\n"
    + "U 2\n"
    + "R 7\n"
    + "D 11\n"
    + "U 4\n"
    + "R 13\n"
    + "U 2\n"
    + "L 16\n"
    + "U 12\n"
    + "L 15\n"
    + "D 10\n"
    + "U 11\n"
    + "L 1\n"
    + "D 1\n"
    + "L 3\n"
    + "D 15\n"
    + "L 12\n"
    + "R 2\n"
    + "D 12\n"
    + "U 16\n"
    + "R 16\n"
    + "U 11\n"
    + "D 15\n"
    + "R 11\n"
    + "U 13\n"
    + "L 3\n"
    + "R 15\n"
    + "D 16\n"
    + "R 9\n"
    + "D 1\n"
    + "L 3\n"
    + "U 9\n"
    + "D 12\n"
    + "U 11\n"
    + "L 13\n"
    + "R 10\n"
    + "D 4\n"
    + "U 12\n"
    + "L 2\n"
    + "R 8\n"
    + "L 1\n"
    + "U 9\n"
    + "L 1\n"
    + "D 7\n"
    + "R 14\n"
    + "U 12\n"
    + "L 9\n"
    + "R 5\n"
    + "D 7\n"
    + "R 10\n"
    + "D 14\n"
    + "L 2\n"
    + "U 2\n"
    + "L 4\n"
    + "D 15\n"
    + "U 7\n"
    + "D 9\n"
    + "L 4\n"
    + "R 1\n"
    + "L 8\n"
    + "D 14\n"
    + "U 9\n"
    + "D 1\n"
    + "R 15\n"
    + "U 9\n"
    + "R 10\n"
    + "D 11\n"
    + "L 14\n"
    + "R 12\n"
    + "L 12\n"
    + "U 13\n"
    + "R 12\n"
    + "L 1\n"
    + "R 10\n"
    + "D 14\n"
    + "R 3\n"
    + "U 5\n"
    + "D 10\n"
    + "L 13\n"
    + "U 11\n"
    + "R 16\n"
    + "L 14\n"
    + "U 6\n"
    + "D 5\n"
    + "R 16\n"
    + "D 7\n"
    + "L 16\n"
    + "U 12\n"
    + "R 14\n"
    + "U 7\n"
    + "R 6\n"
    + "U 17\n"
    + "R 3\n"
    + "U 15\n"
    + "R 17\n"
    + "U 3\n"
    + "R 4\n"
    + "U 6\n"
    + "D 13\n"
    + "U 7\n"
    + "R 12\n"
    + "U 10\n"
    + "R 7\n"
    + "L 13\n"
    + "U 16\n"
    + "D 13\n"
    + "U 2\n"
    + "L 13\n"
    + "R 2\n"
    + "D 1\n"
    + "U 10\n"
    + "R 6\n"
    + "D 11\n"
    + "R 10\n"
    + "D 6\n"
    + "R 2\n"
    + "L 1\n"
    + "R 1\n"
    + "L 5\n"
    + "D 16\n"
    + "U 1\n"
    + "L 13\n"
    + "U 3\n"
    + "R 9\n"
    + "L 10\n"
    + "D 12\n"
    + "R 9\n"
    + "U 17\n"
    + "R 10\n"
    + "U 1\n"
    + "D 13\n"
    + "L 13\n"
    + "R 6\n"
    + "L 5\n"
    + "D 5\n"
    + "R 15\n"
    + "D 15\n"
    + "L 7\n"
    + "U 11\n"
    + "D 1\n"
    + "U 11\n"
    + "L 17\n"
    + "R 5\n"
    + "L 11\n"
    + "R 15\n"
    + "U 16\n"
    + "D 2\n"
    + "L 5\n"
    + "D 9\n"
    + "R 13\n"
    + "D 14\n"
    + "U 6\n"
    + "L 10\n"
    + "U 15\n"
    + "D 15\n"
    + "R 5\n"
    + "D 4\n"
    + "L 13\n"
    + "R 11\n"
    + "D 15\n"
    + "U 13\n"
    + "R 8\n"
    + "U 6\n"
    + "R 8\n"
    + "U 3\n"
    + "R 12\n"
    + "U 11\n"
    + "L 6\n"
    + "U 9\n"
    + "D 6\n"
    + "L 1\n"
    + "U 4\n"
    + "L 6\n"
    + "R 4\n"
    + "D 2\n"
    + "L 6\n"
    + "U 11\n"
    + "L 1\n"
    + "U 10\n"
    + "R 2\n"
    + "U 6\n"
    + "R 1\n"
    + "U 7\n"
    + "R 16\n"
    + "L 12\n"
    + "U 9\n"
    + "D 9\n"
    + "U 6\n"
    + "R 13\n"
    + "U 8\n"
    + "L 6\n"
    + "U 2\n"
    + "R 17\n"
    + "L 6\n"
    + "U 5\n"
    + "D 14\n"
    + "R 15\n"
    + "D 13\n"
    + "L 5\n"
    + "U 18\n"
    + "R 9\n"
    + "L 10\n"
    + "R 9\n"
    + "D 6\n"
    + "L 8\n"
    + "U 3\n"
    + "D 8\n"
    + "R 17\n"
    + "L 4\n"
    + "R 9\n"
    + "L 13\n"
    + "U 3\n"
    + "R 12\n"
    + "D 4\n"
    + "R 11\n"
    + "U 13\n"
    + "L 15\n"
    + "R 13\n"
    + "D 18\n"
    + "R 8\n"
    + "L 7\n"
    + "R 10\n"
    + "D 11\n"
    + "U 8\n"
    + "R 4\n"
    + "L 7\n"
    + "U 15\n"
    + "L 3\n"
    + "D 15\n"
    + "R 3\n"
    + "U 6\n"
    + "L 17\n"
    + "D 17\n"
    + "L 12\n"
    + "D 16\n"
    + "R 14\n"
    + "L 1\n"
    + "R 7\n"
    + "D 15\n"
    + "U 2\n"
    + "L 5\n"
    + "U 16\n"
    + "D 7\n"
    + "L 11\n"
    + "U 1\n"
    + "R 2\n"
    + "D 4\n"
    + "L 13\n"
    + "U 17\n"
    + "R 5\n"
    + "D 17\n"
    + "R 14\n"
    + "L 1\n"
    + "D 11\n"
    + "U 11\n"
    + "R 8\n"
    + "U 12\n"
    + "D 12\n"
    + "U 17\n"
    + "R 15\n"
    + "L 4\n"
    + "D 7\n"
    + "U 8\n"
    + "R 4\n"
    + "L 14\n"
    + "U 11\n"
    + "L 3\n"
    + "R 1\n"
    + "L 14\n"
    + "U 3\n"
    + "L 3\n"
    + "D 15\n"
    + "L 14\n"
    + "D 7\n"
    + "R 2\n"
    + "L 6\n"
    + "U 6\n"
    + "R 12\n"
    + "U 17\n"
    + "D 1\n"
    + "R 15\n"
    + "D 1\n"
    + "U 14\n"
    + "D 6\n"
    + "U 4\n"
    + "R 4\n"
    + "L 3\n"
    + "U 14\n"
    + "L 1\n"
    + "R 4\n"
    + "U 13\n"
    + "D 18\n"
    + "L 11\n"
    + "U 4\n"
    + "D 9\n"
    + "R 10\n"
    + "U 17\n"
    + "R 8\n"
    + "D 12\n"
    + "R 9\n"
    + "L 5\n"
    + "D 6\n"
    + "L 9\n"
    + "R 9\n"
    + "L 17\n"
    + "D 9\n"
    + "R 2\n"
    + "L 4\n"
    + "R 8\n"
    + "D 8\n"
    + "R 8\n"
    + "D 13\n"
    + "R 12\n"
    + "L 13\n"
    + "U 8\n"
    + "D 8\n"
    + "L 16\n"
    + "D 15\n"
    + "U 11\n"
    + "L 8\n"
    + "R 7\n"
    + "D 2\n"
    + "R 6\n"
    + "U 19\n"
    + "D 4\n"
    + "U 7\n"
    + "L 17\n"
    + "R 9\n"
    + "U 18\n"
    + "D 4\n"
    + "R 19\n"
    + "L 14\n"
    + "U 8\n"
    + "D 19\n"
    + "L 12\n"
    + "R 14\n"
    + "U 13\n"
    + "D 3\n"
    + "L 8\n"
    + "D 4\n"
    + "R 9\n"
    + "U 18\n"
    + "D 1\n"
    + "U 2\n"
    + "L 16\n"
    + "U 2\n"
    + "D 12\n"
    + "U 5\n"
    + "L 4\n"
    + "D 6\n"
    + "U 14\n"
    + "R 1\n"
    + "L 7\n"
    + "D 7\n"
    + "L 19\n"
    + "D 5\n"
    + "U 16\n"
    + "D 15\n"
    + "R 14\n"
    + "U 19\n"
    + "D 19\n"
    + "L 6\n"
    + "R 3\n"
    + "L 14\n"
    + "R 16\n"
    + "L 1\n"
    + "U 4\n"
    + "R 19\n"
    + "U 2\n"
    + "L 3\n"
    + "D 19\n"
    + "L 17\n"
    + "U 13\n"
    + "D 5\n"
    + "L 10\n"
    + "U 18\n"
    + "R 13\n"
    + "D 6\n"
    + "L 17\n"
    + "D 9\n"
    + "R 10\n"
    + "D 8\n"
    + "R 19\n"
    + "L 6\n"
    + "D 7\n"
    + "R 18\n"
    + "U 8\n"
    + "L 6\n"
    + "U 18\n"
    + "L 18\n"
    + "D 16\n"
    + "R 8\n"
    + "L 10\n"
    + "R 6\n"
    + "D 1\n"
    + "L 6\n"
    + "U 8\n"
    + "L 19\n"
    + "D 18\n"
    + "U 3\n"
    + "D 17\n"
    + "U 9\n"
    + "R 13\n"
    + "D 18\n"
    + "R 2\n"
    + "L 10\n"
    + "D 17\n"
    + "L 17\n"
    + "U 8\n"
    + "L 13\n"
    + "D 5\n"
    + "L 1\n"
    + "U 10\n"
    + "L 3\n"
    + "R 3\n"
    + "D 12\n"
    + "U 11\n"
    + "L 15\n"
    + "D 15\n"
    ;

function set_input(value) {
    let text = document.getElementById("input");
    text.value = value;
}

function parse(line) {
    let parts = line.split(" ");
    return { operation: parts.length == 2? parts[0]: null, size: parts.length == 2? parseInt(parts[1]): null };
}

function min(a, b) { return a < b? a: b; }
function max(a, b) { return a < b? b: a; }

function get_dimension(input) {
    let x = 0;
    let y = 0;
    let lines = input.split("\n");
    let min_x = 0;
    let max_x = 0;
    let min_y = 0;
    let max_y = 0;

    lines.forEach(function(line){
        let op = parse(line);
        if (op.operation != null) {
            switch (op.operation) {
            case 'R': x += op.size; max_x = max(x, max_x); break;
            case 'L': x -= op.size; min_x = min(x, min_x); break;
            case 'U': y += op.size; max_y = max(y, max_y); break;
            case 'D': y -= op.size; min_y = min(y, min_y); break;
            }
        }
    });

    return { min_x: min_x, max_x: max_x, min_y: min_y, max_y: max_y };
}

function draw(state) {
    state.context.clearRect(0, 0, state.width, state.height);
    state.visited.forEach(function(tail){
        let ctx = state.context;
        ctx.beginPath();
        ctx.arc(state.scale * tail.x, state.height - state.scale * tail.y, state.scale / 2, 0, 2 * Math.PI);
        ctx.stroke();
    });
    state.knots.forEach(function(knot) { knot.draw(); });
}

function pause(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function next(state) {
    if (state.knot < state.knots.length) {
        while (++state.knot < state.knots.length) {
            let knots = state.knots;
            let k = state.knot;
            if (1 < knots[k].x - knots[k-1].x) {
                --knots[k].x;
                knots[k].y += knots[k].y == knots[k-1].y? 0: knots[k].y < knots[k-1].y? 1: -1;
            }
            else if (knots[k].x - knots[k-1].x < -1) {
                ++knots[k].x;
                knots[k].y += knots[k].y == knots[k-1].y? 0: knots[k].y < knots[k-1].y? 1: -1;
            }
            else if (1 < knots[k].y - knots[k-1].y) {
                --knots[k].y;
                knots[k].x += knots[k].x == knots[k-1].x? 0: knots[k].x < knots[k-1].x? 1: -1;
            }
            else if (knots[k].y - knots[k-1].y < -1) {
                ++knots[k].y;
                knots[k].x += knots[k].x == knots[k-1].x? 0: knots[k].x < knots[k-1].x? 1: -1;
            }
        }
        let last = state.knots.length - 1;
        let index = state.knots[last].x + "," + state.knots[last].y;
        if (state.tail.get(index) == undefined) {
            state.tail.set(index, 1);
            state.visited.push({ x: state.knots[last].x, y: state.knots[last].y });
            let tail = document.getElementById("tail");
            tail.value = state.visited.length;
        }
    }
    else if (state.move < state.moves.length) {
        state.knot = 0;
        if (state.size <= 0) {
            ++state.move;
            if (state.move == state.moves.length) {
                return;
            }
            state.size = state.moves[state.move].size;
        }
        switch (state.moves[state.move].operation) {
        case 'R':
            ++state.knots[0].x;
            break;
        case 'L':
            --state.knots[0].x;
            break;
        case 'U':
            ++state.knots[0].y;
            break;
        case 'D':
            --state.knots[0].y;
            break;
        }
        --state.size == 0;
    }

    draw(state);
    if (state.knot != 0) {
        if (state.move != state.moves.length) {
            let speed = document.getElementById("speed-value");
            pause(speed.value).then(() => next(state));
        }
    }
    else {
        next(state);
    }
}

function start() {
    let text = document.getElementById("input");
    let playground = document.getElementById("playground");
    let ctx = playground.getContext("2d");
    let knots = document.getElementById("knots-value").value;
    let input = text.value;

    let dim = get_dimension(input);
    let size_x = 2 + dim.max_x - dim.min_x;
    let size_y = 2 + dim.max_y - dim.min_y;

    let pw = playground.clientWidth;
    let ph = playground.clientHeight;

    scale = min(pw / size_x, ph / size_y);

    let size = max(size_x, size_y);
    let psize = min(pw, ph);

    let state = {
        context: ctx,
        scale: scale,
        width: pw,
        height: ph,
        delay: function(state){ draw(state); },
        knots: [],
        knot: 0,
        moves: [],
        move: -1,
        size: 0,
        tail: new Map(),
        visited: []
    };

    ctx.setTransform(1, 0, 0, 1, 0, 0);
    ctx.lineWidth = 1;
    ctx.strokeStyle = "#FF0000";

    for (let i = 0; i != knots; ++i) {
        state.knots.push({
            scale: scale,
            x: 1 - dim.min_x,
            y: 1 - dim.min_y,
            draw: function() {
                ctx.beginPath();
                ctx.arc(this.scale * this.x, ph - this.scale * this.y, scale / 2, 0, 2 * Math.PI);
                ctx.fill();
            }
        });
    }
    state.knot = state.knots.length;

    input.split("\n").forEach(function(line){
        state.moves.push(parse(line));
    });
    next(state);
}

function knotschange(knots) {
    let value = document.getElementById("knots-value");
    value.value = knots;
    let range = document.getElementById("knots-range");
    range.value = knots;
}

function speedchange(speed) {
    let value = document.getElementById("speed-value");
    value.value = speed;
    let range = document.getElementById("speed-range");
    range.value = speed;
}

function init() {
    let playground = document.getElementById("playground");

    set_input(small);
    start();
}

        </script>
        <style>
           textarea {
              height: 70%;
           }
           span {
              height: 70%;
           }
        </style>
    </head>
    <body onload="init()">
        <div id="outer">
            <textarea id="input">
            </textarea>
            <span>
            <canvas width="800" height="500" id="playground">
            </span>
        </div>
        <span>
            <input type="button" value="start" onclick="start()">
            <input id="knots-range" type="range" min="1" max="100" value="10" oninput="knotschange(this.value)">
            <input id="knots-value" type="number" min="1" max="100" value="10" oninput="knotschange(this.value)">
            <input id="speed-range" type="range" min="1" max="300" value="100" oninput="speedchange(this.value)">
            <input id="speed-value" type="number" min="1" max="300" value="100" oninput="speedchange(this.value)">
            <input type="button" value="small" onclick="set_input(small)">
            <input type="button" value="medium" onclick="set_input(medium)">
            <input type="button" value="puzzle" onclick="set_input(puzzle)">
            <input id="tail" type="number" value="0">
        </span>
    </body>
</html>
